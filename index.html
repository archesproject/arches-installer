<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arches v4.0 | Installation</title>
    <link href="app.css" rel="stylesheet">
</head>

<body>
    <div class="effect mainnav-sm">
        <div class="boxed">
            <div class="boxed-content-wrapper">
                <div class="row" id="splash-container" data-bind="visible: showSplash()">
                    <div class="col-xs-6 col-xs-offset-3 logo-wrapper">
                        <div class="install-logo">
                            <img class="img-lg install-logo" src="assets/img/arches_logo.png" alt="arches logo">
                        </div>
                        <div>
                            <h1>
                                Welcome to Arches
                                <small>Version 4.0.0</small>
                            </h1>
                            <p class="text-2x">
                                This wizard will help you install Arches
                            </p>
                        </div>
                        <div class="welcome-wrapper">
                            <button id="install-welcome" class="btn btn-dark btn-icon btn-circle icon-3x fa fa-long-arrow-right" data-bind="click: function () { showSplash(false); showDependencies(true); }"></button>
                        </div>
                    </div>
                </div>

                <div class="row" id="wizard-container" data-bind="visible: !showSplash()">
                    <div class="wizard-side-bar">
                        <div class="nano-content">
                            <ul class="nav nav-tabs nav-justified arches-install-menu">
                                <li class="pad-lft">
                                    <h3> Install Arches </h3>
                                </li>
                            </ul>
                            <div class="tab-content">
                                <div class="tab-pane fade in active" id="tab-1">
                                    <div class="list-group bg-trans">
                                        <a id="db" href="#" class="list-group-item" data-bind="css: {'active': showDependencies()}, click: function () { showDependencies(true); showInstaller(false); }">
                                            <div class="media-left">
                                                <span class="icon-wrap icon-wrap-sm icon-circle" data-bind="css: {'bg-primary': showDependencies(), 'bg-gray-dark': !showDependencies()}">
                                                    <i class="fa fa-database"></i>
                                                </span>
                                            </div>
                                            <div class="media-body">
                                                <div class="text-lg text-semibold">Dependencies</div>
                                                <span class="text-muted">Install/confirm required applications</span>
                                            </div>
                                        </a>
                                        <a id="geos" href="#" class="list-group-item" data-bind="css: {'active': showInstaller()}, click: function () { showInstaller(true); showDependencies(false); }">
                                            <div class="media-left">
                                                <span class="icon-wrap icon-wrap-sm icon-circle" data-bind="css: {'bg-primary': showInstaller(), 'bg-gray-dark': !showInstaller()}">
                                                    <i class="fa fa-globe"></i>
                                                </span>
                                            </div>
                                            <div class="media-body">
                                                <div class="text-lg">Install Arches Framework</div>
                                                <span class="text-muted">Install core Arches components</span>
                                            </div>
                                        </a>
                                        <a id="python" href="#" class="list-group-item">
                                            <div class="media-left">
                                                <span class="icon-wrap icon-wrap-sm bg-gray-dark icon-circle">
                                                    <i class="fa fa-code"></i>
                                                </span>
                                            </div>
                                            <div class="media-body">
                                                <div class="text-lg">Install Arches Applications</div>
                                                <span class="text-muted">Install or build an Arches app</span>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="eq-box-md eq-no-panel wizard-main" data-bind="visible: showDependencies()">
                        <div class="panel info-panel">
                            <div class="eq-height clearfix">
                                <div class="col-md-5 eq-box-md text-center box-vmiddle-wrap bg-primary">
                                    <div id="depend-tab-0" data-bind="visible: ($element.id.split('depend-tab-')[1]==currentStep())" class="depend-tab box-vmiddle pad-all">
                                        <h3 class="text-thin">Step 1: Install Database</h3>
                                        <span class="icon-wrap icon-wrap-lg icon-circle bg-trans-light">
                                            <i class="fa fa-database fa-5x text-primary"></i>
                                        </span>
                                        <p class="wizard-instructions">
                                            You'll need to install
                                            <span class="text-lg text-bold">
                                                <a class="text-primary" href="#" data-bind="click: function() { openExternal('http://www.postgresql.org/download/') }">
                                                    PostgreSQL 9.4
                                                </a>
                                                and
                                                <a class="text-primary" href="#" data-bind="click: function() { openExternal('http://postgis.net/install/') }">
                                                    PostGIS 2.0
                                                </a>
                                            </span>
                                            to run Arches.  Afterwards, enter the required connection information
                                        </p>
                                        <a class="btn btn-lg btn-primary btn-labeled fa fa-arrow-right" href="#" id="postgis-info-link" data-bind="click: function() { openExternal('http://postgis.net/') }">
                                            Learn More...
                                        </a>
                                    </div>

                                    <div id="depend-tab-1" data-bind="visible: ($element.id.split('depend-tab-')[1]==currentStep())" class="depend-tab box-vmiddle pad-all">
                                        <h3 class="text-thin">Step 2: Install GEOS</h3>
                                        <span class="icon-wrap icon-wrap-lg icon-circle bg-trans-light">
                                            <i class="fa fa-globe fa-5x text-primary"></i>
                                        </span>
                                        <p class="wizard-instructions">
                                            Arches uses
                                            <span class="text-lg text-bold">
                                                <a class="text-primary" href="#" data-bind="click: function() { openExternal('http://trac.osgeo.org/geos/') }">
                                                    GEOS
                                                </a>
                                            </span>
                                            to help manage geospatial data.  Install GEOS then enter the path to your installation folder.
                                        </p>
                                        <a class="btn btn-lg btn-primary btn-labeled fa fa-arrow-right" href="#">
                                            Learn More...
                                        </a>
                                    </div>

                                    <div id="depend-tab-2" data-bind="visible: ($element.id.split('depend-tab-')[1]==currentStep())" class="depend-tab box-vmiddle pad-all">
                                        <h3 class="text-thin">Step 3: Install/Confirm Python</h3>
                                        <span class="icon-wrap icon-wrap-lg icon-circle bg-trans-light">
                                            <i class="fa fa-code fa-5x text-primary"></i>
                                        </span>
                                        <p class="wizard-instructions">
                                            Arches requires
                                            <span class="text-lg text-bold">Python v2.7.6</span>.
                                            Confirm that you are running v2.7.6 then enter the path to your folder.
                                        </p>
                                        <a class="btn btn-lg btn-primary btn-labeled fa fa-arrow-right" href="#">
                                            Learn More...
                                        </a>
                                    </div>

                                    <div id="depend-tab-3" data-bind="visible: ($element.id.split('depend-tab-')[1]==currentStep())" class="depend-tab box-vmiddle pad-all">
                                        <h3 class="text-thin">Step 4: Install JDK</h3>
                                        <span class="icon-wrap icon-wrap-lg icon-circle bg-trans-light">
                                            <i class="fa fa-coffee fa-5x text-primary"></i>
                                        </span>
                                        <p class="wizard-instructions">
                                            You'll need to install a Java
                                            <span class="text-lg text-bold">JDK</span>
                                            to run Arches.  Afterwards, enter the path to your installation folder.
                                        </p>
                                        <a class="btn btn-lg btn-primary btn-labeled fa fa-arrow-right" href="#">
                                            Learn More...
                                        </a>
                                    </div>

                                </div>

                                <div class="col-md-7 eq-box-md eq-no-panel wizard-form-panel">
                                    <div id="dependencies">
                                        <ul class="row wz-step wz-icon-bw wz-nav-off mar-top wizard-icon-list">
                                            <li class="col-xs-3">
                                                <a data-toggle="tab" href="#db-tab">
                                                    <span id="depend-icon-0" data-bind="css: { 'bg-dark': ($element.id.split('depend-icon-')[1]==currentStep()) }" class="icon-wrap icon-wrap-sm icon-circle bg-gray-dark">
                                                        <i class="fa fa-database"></i>
                                                    </span>
                                                    <p class="text-thin">Database</p>
                                                </a>
                                            </li>
                                            <li class="col-xs-3">
                                                <a data-toggle="tab" href="#geos-tab">
                                                    <span id="depend-icon-1" data-bind="css: { 'bg-dark': ($element.id.split('depend-icon-')[1]==currentStep()) }" class="icon-wrap icon-wrap-sm icon-circle bg-gray-dark">
                                                        <i class="fa fa-globe"></i>
                                                    </span>
                                                    <p class="text-thin">GEOS</p>
                                                </a>
                                            </li>
                                            <li class="col-xs-3">
                                                <a data-toggle="tab" href="#python-tab">
                                                    <span id="depend-icon-2" data-bind="css: { 'bg-dark': ($element.id.split('depend-icon-')[1]==currentStep()) }" class="icon-wrap icon-wrap-sm icon-circle bg-gray-dark">
                                                        <i class="fa fa-code"></i>
                                                    </span>
                                                    <p class="text-thin">Python</p>
                                                </a>
                                            </li>
                                            <li class="col-xs-3">
                                                <a data-toggle="tab" href="#jdk-tab">
                                                    <span id="depend-icon-3" data-bind="css: { 'bg-dark': ($element.id.split('depend-icon-')[1]==currentStep()) }" class="icon-wrap icon-wrap-sm icon-circle bg-gray-dark">
                                                        <i class="fa fa-coffee"></i>
                                                    </span>
                                                    <p class="text-thin">Java (JDK)</p>
                                                </a>
                                            </li>
                                        </ul>
                                        <div class="progress progress-xs">
                                            <div class="progress-bar progress-bar-primary" data-bind="style: { 'width': stepProgress().width, 'left': stepProgress().left }">
                                            </div>
                                        </div>
                                        <form class="form-horizontal">
                                            <div class="panel-body">
                                                <div class="tab-content">
                                                    <div id="db-tab" class="tab-pane">
                                                        <div class="form-group">
                                                            <label class="col-sm-3 control-label text-semibold">User</label>
                                                            <div class="col-sm-9">
                                                                <input type="text" placeholder="admin account name" class="form-control" data-bind="value: postgres.user, valueUpdate: 'keyup'">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="col-sm-3 control-label text-semibold">Password</label>
                                                            <div class="col-sm-9">
                                                                <input type="password" placeholder="password" class="form-control" data-bind="value: postgres.password, valueUpdate: 'keyup'">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="col-sm-3 control-label text-semibold">Hostname</label>
                                                            <div class="col-sm-9">
                                                                <input type="text" placeholder="hostname" class="form-control" data-bind="value: postgres.host, valueUpdate: 'keyup'">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="col-sm-3 control-label text-semibold">Port</label>
                                                            <div class="col-sm-9">
                                                                <input type="text" placeholder="port" class="form-control" data-bind="value: postgres.port, valueUpdate: 'keyup'">
                                                            </div>
                                                        </div>
                                                        <div class="form-group">
                                                            <label class="col-sm-3 control-label text-semibold">PostGIS Template</label>
                                                            <div class="col-sm-9">
                                                                <input type="text" placeholder="template_postgis_20" class="form-control" data-bind="value: postgres.postgisTemplate, valueUpdate: 'keyup'">
                                                            </div>
                                                        </div>
                                                        <div class="validation-msg-wrapper">
                                                            <p class="alert bg-success validation-msg" data-bind="style: { 'opacity': (postgres.ready() ? 1 : 0) }">
                                                                Looks good!
                                                            </p>
                                                            <p class="alert bg-danger validation-msg" data-bind="style: { 'opacity': (postgres.ready() ? 0 : 1) }">
                                                                Something's not working...
                                                            </p>
                                                        </div>
                                                    </div>

                                                    <div id="geos-tab" class="tab-pane fade">
                                                        <div class="form-group wizard-form-group">
                                                            <label class="col-sm-3 control-label text-semibold">Path</label>
                                                            <div class="col-sm-9">
                                                                <input type="text" class="form-control">
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div id="python-tab" class="tab-pane">
                                                        <div class="form-group wizard-form-group">
                                                            <label class="col-sm-3 control-label text-semibold">Path</label>
                                                            <div class="col-sm-9">
                                                                <input type="text" class="form-control">
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div id="jdk-tab" class="tab-pane">
                                                        <div class="form-group wizard-form-group">
                                                            <label class="col-sm-3 control-label text-semibold">Path</label>
                                                            <div class="col-sm-9">
                                                                <input type="text" class="form-control">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="pull-right pad-all">
                                                <button id="depend-prev" type="button" class="previous btn btn-primary">
                                                    Previous
                                                </button>
                                                <button id="depend-next" type="button" class="next btn btn-primary" data-bind="enable: enableNext, visible: !finalStep()">
                                                    Next
                                                </button>
                                                <button id="depend-finish" type="button" class="btn btn-success" data-bind="enable: enableNext, visible: finalStep(), click: function () { showDependencies(false); showInstaller(true); }">
                                                    Finish
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="eq-box-md eq-no-panel wizard-main" data-bind="visible: showInstaller()">
                        <h2>Install Arches</h2>

                        <div data-bind="visible: installArches.running() || installArches.complete()" class="panel list-group-item ">
                            <ol data-bind="foreach: installArches.commands">
                                <li data-bind="visible: running() || complete()">
                                    <span data-bind="text: description + '...'"></span>
                                    <i class="fa fa-spinner fa-spin" data-bind="visible: running()"></i>
                                    <i class="fa fa-check" data-bind="visible: complete() && success()"></i>
                                    <i class="fa fa-exclamation-circle" data-bind="visible: complete() && !success()"></i>
                                </li>
                            </ol>
                        </div>

                        <div class="alert" data-bind="visible: installArches.complete(), text: installArches.success() ? 'Success!' : 'Something went wrong...', css: { 'bg-success': installArches.success(), 'bg-danger': !installArches.success()}"></div>

                        <div data-bind="visible: !installArches.running()">
                            <div data-bind="visible: envPath()" class="list-group-item panel">
                                <strong>path:</strong>
                                <span data-bind="text: envPath()"></span>
                            </div>

                            <button class="btn btn-primary" data-bind="click: function () { getEnvPath() }">Choose Path</button>
                            <button class="btn btn-primary" data-bind="enable: envPath, click: function () { installArches.start() }, text: installArches.complete() ? 'Again' : 'Start'"></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <button id="scroll-top" class="btn">
            <i class="fa fa-chevron-up"></i>
        </button>
    </div>
</body>
<script src="app.js"></script>
</html>
