<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arches v4.0 | Installation</title>
    <link href="app.css" rel="stylesheet">
</head>

<body>
    <div class="effect mainnav-sm">
        <div class="boxed">
            <div class="boxed-content-wrapper">
				<div class="row" id="splash-container" data-bind="visible: showSplash()">
					<div class="col-xs-6 col-xs-offset-3 splash-wrapper">
						<div class="logo-wrapper">
							<img class="img-lg splash-logo" src="assets/img/arches_logo.png" alt="Sample Image">
						</div>
						<div class="" style="">
							<h1>Welcome to Arches <small>Version 4.0.0</small></h1>
							<p class="text-2x" style="">
								This wizard will help you install Arches
							</p>
						</div>
						<div class="welcome-wrapper">
							<button id="install-welcome" class="btn btn-primary btn-labeled btn-lg fa fa-check" data-bind="click: function () { showSplash(false); showDependencies(true); }">Install Arches</button>
						</div>
					</div>
				</div>

                <div id="wizard-container" data-bind="visible: !showSplash()" style="height:100%;">
    				<div class="row" style="height:100%;">

    					<!-- Form -->
    					<div class="eq-box-md eq-no-panel" style="padding: 5px 20px 10px 20px; height:100%;">

    						<div class="panel" style="border: 1px solid #ddd; margin-bottom: 0px; height:100%; position:relative;">
    							<div class="panel-heading">
    								<h3 class="panel-title dependency-title">
    									Arches Installer <small> for v4.0 </small>
    								</h3>
    							</div>

    							<div class="panel-body" style="padding: 0px 20px 0 10px;">
    								<div class="tab-base" style="border: 0px solid #eee;">
    									<!--Nav Tabs-->
    									<ul class="nav nav-tabs" style="background: #f4f4f4; margin-left: 10px;" data-bind="foreach: tabs">
    										<li data-bind="css: { active: active }, click: function () { if (enableTab()) { activateTab() } }">
    											<a data-toggle="tab" class="install-tab-title" data-bind="attr: { href: tabLink }, css: { 'install-tab-disabled': !enableTab() }, text: title"></a>
    										</li>
    									</ul>

    									<div id="db-arches-app-alert" class="panel install-card-alert" style=""></div>

    									<!--Tabs Content-->
    									<div class="tab-content" style="padding: 5px 10px 0 10px; box-shadow: none; min-height: 415px;">

    										<!-- Dependency Checks -->
    										<div id="depend-tab" class="tab-pane fade active in" data-bind="visible: (getActiveTab().title==='Dependencies')">
    											<div class="panel-body" style="padding: 20px 10px 20px 5px;">
    												<p id="install-instructions" class="install-instructions">Arches expects that your computer is loaded with a core set of technologies including python, GEOS, and a Java Development Kit (JDK)</p>

                                                    <div data-bind="foreach: dependencies">
                                                        <div class="panel install-card-alert">
                                                            <div class="panel-alert">
                                                                <div class="alert-wrap" data-bind="css: {  'in' : !running() && checked(), 'hidden': running() || !checked() }">
                                                                    <div class="alert" role="alert" data-bind="css: { 'alert-mint': ready(), 'alert-danger': !ready() }">
                                                                        <div class="media">
                                                                            <span class="icon-wrap icon-circle" data-bind="css: { 'icon-bg-success': ready(), 'icon-bg-fail': !ready() }">
                                                                                <i class="fa fa-check" data-bind="css: { 'fa-check': ready(), 'fa-times': !ready() }">
                                                                                </i>
                                                                            </span>
                                                                            <div class="dependency-message">
                                                                                <p>
                                                                                    <strong data-bind="text:name"></strong>
                                                                                    <span data-bind="text:ready()?'Confirmed!':'Could not be verified...'"></span>
                                                                                    <button class="btn btn-danger btn-dependency" data-bind="visible:!ready()">Suggested fixes</button>
                                                                                </p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

    												<div class="install-buttons">
    													<button id="dependencies" class="btn btn-primary btn-labeled btn-lg fa fa-binoculars" data-bind="click: function () { checkDependencies(); }">Start Dependency Check</button>
    													<button id="dependency-next" class="btn btn-mint btn-labeled btn-lg fa fa-arrow-right" data-bind="enable: getActiveTab().allowNext(), css: { 'disabled': !getActiveTab().allowNext() }, click: function () { nextTab(); }">Next</button>
    												</div>

                                                    <div data-bind="style: { 'fontSize': dependencyCheckRunning() ? '65px' : 0 }" style="text-align: center; transition: all .25s;"><i class="fa fa-spinner fa-3 fa-spin"></i></div>
    											</div>
    										</div>

    										<!-- Db Checks -->
    										<div id="db-tab" class="tab-pane fade active in" data-bind="visible: (getActiveTab().title==='Database')">
    											<div class="panel-body" style="padding: 20px 10px 20px 5px;">
    												<p id="install-instructions" class="install-instructions">Arches requires <a class="text-primary" href="#" data-bind="click: function() { openExternal('http://www.postgresql.org/download/') }" target="_blank">PostgreSQL 9.4</a> and <a class="text-primary" href="#" data-bind="click: function() { openExternal('http://postgis.net/install/') }" target="_blank">PostGIS 2.0</a>.  Please install the database and provide your connection parameters</p>

                                                    <div class="panel install-card-alert">
                                                        <div class="panel-alert">
                                                            <div class="alert-wrap in">
                                                                <div class="alert" role="alert" data-bind="css: { 'alert-mint': postgres.ready(), 'alert-danger': !postgres.ready() }">
                                                                    <div class="media">
                                                                        <span class="icon-wrap icon-circle" data-bind="css: { 'icon-bg-success': postgres.ready(), 'icon-bg-fail': !postgres.ready() }">
                                                                            <i class="fa fa-check" data-bind="css: { 'fa-check': postgres.ready(), 'fa-times': !postgres.ready() }">
                                                                            </i>
                                                                        </span>
                                                                        <div class="dependency-message">
                                                                            <p>
                                                                                <strong data-bind="text:name"></strong>
                                                                                <span data-bind="text:postgres.ready()?'Success!':'Could not connect...'"></span>
                                                                                <button class="btn btn-danger btn-dependency" data-bind="visible:!postgres.ready()">Suggested fixes</button>
                                                                            </p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

    												<form class="form-horizontal">
    													<div class="panel-body">
    														<div class="form-group">
    															<label class="col-sm-3 control-label text-semibold" for="">User</label>
    															<div class="col-sm-9 col-md-6 col-lg-4">
    																<input type="" placeholder="user" id="" class="form-control" data-bind="value: postgres.user, valueUpdate: 'keyup'">
    															</div>
    														</div>
    														<div class="form-group">
    															<label class="col-sm-3 control-label text-semibold" for="">Password</label>
    															<div class="col-sm-9 col-md-6 col-lg-4">
    																<input type="password" placeholder="password" id="" class="form-control" data-bind="value: postgres.password, valueUpdate: 'keyup'">
    															</div>
    														</div>
                                                            <div class="form-group">
                                                                <label class="col-sm-3 control-label text-semibold" for="">Host</label>
                                                                <div class="col-sm-9 col-md-6 col-lg-4">
                                                                    <input type="" placeholder="host" id="" class="form-control" data-bind="value: postgres.host, valueUpdate: 'keyup'">
                                                                </div>
                                                            </div>
    														<div class="form-group">
    															<label class="col-sm-3 control-label text-semibold" for="">Port</label>
    															<div class="col-sm-9 col-md-6 col-lg-4">
    																<input type="" placeholder="port" id="" class="form-control" data-bind="value: postgres.port, valueUpdate: 'keyup'">
    															</div>
    														</div>
    														<div class="form-group">
    															<label class="col-sm-3 control-label text-semibold" for="">PostGIS Template</label>
    															<div class="col-sm-9 col-md-6 col-lg-4">
    																<input type="" placeholder="PostGIS template name" id="" class="form-control" data-bind="value: postgres.postgisTemplate, valueUpdate: 'keyup'">
    															</div>
    														</div>
    													</div>
    												</form>

    												<div class="install-buttons">
    													<button id="db-next" class="btn btn-mint disabled btn-labeled btn-lg fa fa-arrow-right" style="" data-bind="enable: getActiveTab().allowNext(), css: { 'disabled': !getActiveTab().allowNext() }, click: function () { nextTab(); }">Next</button>
    												</div>
    											</div>
    										</div>

    										<!-- Framework Install -->
    										<div id="framework-tab" class="tab-pane fade active in" data-bind="visible: (getActiveTab().title==='Framework')">
    											<div class="panel-body" style="padding: 20px 10px 20px 5px;">
    												<p id="install-instructions" class="install-instructions">The Arches Framework includes core technologies and provides for key services such as data management, search/indexing, and thesaurus management.</p>

    												<div id="db-arches-framework-alert" class="panel install-card-alert" style=""></div>

    												<form class="form-horizontal">
    													<div class="panel-body">

    														<div class="input-group" data-bind="click: function () { envPath.showDialog(); }">
    															<span class="input-group-btn" style="z-index: 500;">
    																<span class="btn btn-default btn-file">
    																	Browse...
    																</span>
    															</span>
    															<input readonly data-bind="value: envPath" type="" placeholder="Installation folder for Arches..." class="form-control" style="margin-left: -78px; height: 40px; padding-left: 85px; border-radius: 2px; background-color: rgb(255, 255, 255); cursor: pointer;">
    														</div>

    													</div>
    												</form>

    												<div class="install-buttons">
    													<button id="framework-install" class="btn btn-primary btn-labeled btn-lg fa fa-check" data-bind="click: function() { installArches.start() }, enable: !installArches.running() && (envPath()!==''), css: { 'disabled': installArches.running() && (envPath()!=='') }">Install Arches Framework</button>
    													<button id="framework-next" class="btn btn-mint disabled btn-labeled btn-lg fa fa-arrow-right" data-bind="enable: getActiveTab().allowNext(), css: { 'disabled': !getActiveTab().allowNext() }, click: function () { nextTab(); }">Next</button>
    												</div>

    												<div id="framework-install-window" class="panel install-progress-window" data-bind="visible: installArches.running() || installArches.complete()">
    													<div id="" class="panel-body" style="padding: 10px 10px 20px 10px;">
    														<dl style="margin-bottom: 0px;">
    															<dt>Installing Arches Framework</dt>
                                                                <div data-bind="foreach:installArches.commands">
                                                                    <dd data-bind="visible: running() || complete()"><i class="fa" style="width:12px;" data-bind="css: { 'fa-spinner fa-spin': running(), 'fa-check': complete() && success(), 'fa-times': complete() && !success() }"></i> <span data-bind="text:description"></span></dd>
                                                                </div>
    															<hr class="no-border" style="">
    															<dt data-bind="visible: installArches.complete(), text: installArches.success() ? 'Installation completed with no errors' : 'Installation failed (see above)'"></dt>
    														</dl>
    													</div>
    												</div>
    											</div>
    										</div>

    										<!-- Arches App Selection -->
    										<div id="select-tab" class="tab-pane fade active in"  data-bind="visible: (getActiveTab().title==='Select Application')">
    											<p id="install-instructions" class="install-instructions" style="margin-top: 0px; padding-left: 5px;">Select an application to install:</p>

    											<div id="select-arches-app-alert" class="panel install-card-alert" style=""></div>

    											<div class="row" data-bind="foreach: applicationList">

    												<div class="col-sm-6">
    													<div class="panel" style="border: 1px solid #ddd;">
    														<div class="panel-bg-cover">
    															<img class="img-responsive" alt="Image" data-bind="attr: {src: image}">
    														</div>
    														<div class="" style="padding: 10px 0 0 15px;">
    															<div class="row">
    																<div class="col-xs-12">
    																	<h3 class="panel-media-heading" data-bind="text: name"></h3>
    																	<a href="#" class="btn-link" data-bind="text: caption"></a>
    																</div>
    																<div class="col-xs-12 mar-top">
    																	<button id="select-blank" class="btn btn-primary btn-labeled btn-lg fa fa-check" data-bind="text: 'Select '+name, click: function () { $root.selectedApplication($data); }"></button>
    																</div>
    															</div>
    														</div>
    														<div class="panel-body" style="height: 150px; overflow-y: hidden;">
    															<h4 data-bind="text: name"></h4>
                                                                <span data-bind="text: description"></span>
    														</div>
    													</div>
    												</div>

    											</div>
    										</div>

    										<!-- Arches App Installation -->
    										<div id="install-tab" class="tab-pane fade active in" data-bind="visible: (getActiveTab().title==='Install Application')">
    											<h4 class="text-thin hidden">Install Arches-HIP</h4>

    											<div id="install-arches-app-alert" class="panel install-card-alert" style=""></div>

    											<div class="" style="padding-left: 5px;">
                                                    <form class="form-horizontal">
                                                        <div class="panel-body">
                                                            <div class="form-group">
                                                                <label class="col-sm-3 control-label text-semibold" for="">Application Name</label>
                                                                <div class="col-sm-9 col-md-8 col-lg-4">
                                                                    <input type="" placeholder="name your Arches application" id="" class="form-control app-name-input" data-bind="value: newAppName, valueUpdate: 'keyup'">
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label class="col-sm-3 control-label text-semibold" for="">Install Location</label>
                                                                <div class="col-sm-9 col-md-8 col-lg-4">
                                                                    <div class="input-group" data-bind="click: function () { appPath.showDialog(); }">
                                                                        <span class="input-group-btn" style="z-index: 500; left: 5px;">
                                                                            <span class="btn btn-default btn-file">
                                                                                Browse...
                                                                            </span>
                                                                        </span>
                                                                        <input readonly data-bind="value: appPath, attr: {'placeholder': 'Installation folder for ' + (selectedApplication() ? selectedApplication().name: '') + '...'}" type="" class="form-control" style="height: 40px; padding-left: 85px; border-radius: 2px; background-color: rgb(255, 255, 255); cursor: pointer; right: 0; top: -5px; position: absolute;">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label class="col-sm-3 control-label text-semibold" for="">Import default thesauri</label>
                                                                <div class="col-sm-9 col-md-6 col-lg-4">
                                                                    <input class="" type="checkbox" checked>  </input>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label class="col-sm-3 control-label text-semibold" for="">Import test dataset</label>
                                                                <div class="col-sm-9 col-md-6 col-lg-4">
                                                                    <input class="" type="checkbox">  </input>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label class="col-sm-3 control-label text-semibold" for="">Use default search engine</label>
                                                                <div class="col-sm-9 col-md-6 col-lg-4">
                                                                    <input class="" type="checkbox" checked>  </input>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </form>
    												<div class="install-buttons">
                                                        <button class="btn btn-primary btn-labeled btn-lg fa fa-check" data-bind="click: function() { selectedApplication().installer.start() }, enable: !selectedApplication().installer.running() && (appPath()!=='') && (newAppName()!==''), css: { 'disabled': selectedApplication().installer.running() || (appPath()==='') || (newAppName()==='')}">Install <span data-bind="text:selectedApplication().name"></span></button>
    													<button class="btn btn-mint disabled btn-labeled btn-lg fa fa-arrow-right" data-bind="enable: getActiveTab().allowNext(), css: { 'disabled': !getActiveTab().allowNext() }, click: function () { nextTab(); }">Next</button>
    												</div>
    											</div>

    											<div id="app-install-window" class="panel install-progress-window"  data-bind="visible: selectedApplication().installer.running() || selectedApplication().installer.complete()">
                                                    <div id="" class="panel-body" style="padding: 10px 10px 20px 10px;">
                                                        <dl style="margin-bottom: 0px;">
                                                            <dt>Installing <span data-bind="text:selectedApplication().name"></span></dt>
                                                            <div data-bind="foreach:selectedApplication().installer.commands">
                                                                <dd data-bind="visible: running() || complete()"><i class="fa" style="width:12px;" data-bind="css: { 'fa-spinner fa-spin': running(), 'fa-check': complete() && success(), 'fa-times': complete() && !success() }"></i> <span data-bind="text:description"></span></dd>
                                                            </div>
                                                            <hr class="no-border" style="">
                                                            <dt data-bind="visible: selectedApplication().installer.complete(), text: selectedApplication().installer.success() ? 'Installation completed with no errors' : 'Installation failed (see above)'"></dt>
                                                        </dl>
                                                    </div>
    											</div>
    										</div>

    										<!-- Web Config -->
    										<div id="web-tab" class="tab-pane fade active in" data-bind="visible: (getActiveTab().title==='Web Server')">
    											<h4 class="text-thin" style="padding-left: 5px; margin-bottom: 5px;">Configure your web server</h4>

    											<div id="web-arches-app-alert" class="panel install-card-alert" style=""></div>

    											<div class="" style="padding-left: 5px;">
    												<div class="" style="">
    													<a id="" href="#" class="install-link" target="_blank"> Apache Configuration Instructions</a>
    												</div>
    												<div class="" style="">
    													<a id="" href="#" class="install-link" target="_blank"> IIS Configuration Instructions</a>
    												</div>
    												<div class="pad-top install-switch" style="padding-left: 0px; margin-bottom: 20px;">
    													<p id="install-instructions" class="install-instructions" style="margin-top: 0px; padding-left: 0px;">To confirm your installation (or for very small projects), you can use Arches own web server</p>

    													<input id="web-preview" class="" style="" type="checkbox" data-bind="checked: devServerRunning">
    														<a id="" href="#" class="" data-bind="click: function () { devServerRunning(!devServerRunning()) }">
    															Preview Arches <small>(NOT recommended for production use)</small>
    														</a>
    													</input>
                                                        <div data-bind="visible: devServerRunning">server running...</div>
    												</div>
    												<div class="install-buttons">
    													<button id="install-finish" class="btn btn-primary btn-labeled btn-lg fa fa-check" style="">Finish</button>
    												</div>
    											</div>
    										</div>
    									</div>
    								</div>

    							</div>
    							<div class="panel-footer dependency-footer">
    								<div class="">
    									<p id="footer-message" class="install-footer-message" data-bind="text: getActiveTab().description"></p>
    									<a id="help-message" href="#" class="install-help" data-bind="click: function () { openExternal(getActiveTab().helpLink) }">
    										<i class="fa fa-question-circle fa-fw fa-lg"></i>Help
    									</a>
    								</div>
    							</div>
    						</div>
    					</div>
    				</div>
    			</div>
            </div>
        </div>
        <button id="scroll-top" class="btn">
            <i class="fa fa-chevron-up"></i>
        </button>
    </div>
</body>
<script src="app.js"></script>
</html>
